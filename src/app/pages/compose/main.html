<div class="maincontainer _fw second-view ng-class:{'navtiny' : navView,'sidetiny' : ctlApp.viewSettings.sidebar.collapsed}">
  <nst-sidebar data-ng-model="sidebar" collapsed="ctlApp.viewSettings.sidebar.collapsed" class="_fn _fh"></nst-sidebar>
  <div class="nst-container" page-change="ctlCompose.changeState($event, $toState, $toParams, $fromState, $fromParams, $cancel)">
    <div class="nst-topnav _difh">
      <div class="_fw _df">
        <div class="icon icon-top hamburger-icon"></div>
      </div>
      <div class="_fw _jcc _df">
        <div id="Logo-white"></div>
      </div>
      <div class="_fw _df">
        <div class="icon icon-compose _df"></div>
      </div>
    </div>
    <nst-navbar controls="ctlCompose.controls" place="ctlCompose.place" page="ctlApp.page"></nst-navbar>

    <div class="nst-content _tr" id="content-wrapper" ng-scrollbars>
      <section class="content _bgwhite">
        <div class="_fw" ng-model="attachfiles" data-droplet>
          <div class="droplet"></div>
          <section class="first-child">
            <div class="_difc _fw">
              <div class="_df">
                <span class="sto">To:</span>
              </div>

              <div class="_df _fw input-select-match">
                <ui-select multiple class="address-input _dib" id="input-compose-to"
                           page-change-element data-ng-model="ctlCompose.model.recipients" data-ng-change="ctlCompose.model.check()"
                           tagging="ctlCompose.search.tagger" tagging-label="true">
                  <ui-select-match placeholder="Type place name or email address...">
                    <span>{{$item.name}} &lt;{{$item.id}}&gt;</span>
                  </ui-select-match>
                  <ui-select-choices refresh="ctlCompose.search.fn($select.search)" refresh-delay="0"
                                     repeat="place in (ctlCompose.search.results | filter: $select.search) track by place.id">
                    <img class="account-initials-32" src="{{place.avatar}}"/>
                    <span class="" data-ng-bind-html="place.name | highlight: $select.search"></span>
                    <br/>
                    <span class="nst-font-10 _vat margin-l-50">{{place.id}}</span>
                  </ui-select-choices>
                </ui-select>
              </div>

            </div>
          </section>
          <hr/>
          <section class="_difc _fw">
            <div class="_df _fw input-select-match">
              <input page-change-element class="compose-input _fw" name="subject" placeholder="Add a Subject ..."
                     data-ng-model="ctlCompose.model.subject" data-ng-change="ctlCompose.model.check()"/>
            </div>
          </section>
          <hr data-ng-show="attachshow"/>
          <form name="attachmentForm">
            <input page-change-element type="hidden" name="attLength" data-ng-model="ctlCompose.model.attachments.length"/>
          </form>

          <div class="nst-attach _dif _fw" data-ng-show="ctlCompose.attachments.viewModels.length > 0">
            <div class="_fw">
              <nst-attachments-editable-bar mode="thumbnail" items="ctlCompose.attachments.viewModels" on-item-delete="ctlCompose.attachments.detach"></nst-attachments-editable-bar>
            </div>
            <div class="attach _df">
              <input id="{{ctlCompose.attachments.elementId}}" type="file" multiple onchange="angular.element(this).scope().ctlCompose.attachments.fileSelected(event)"/>
            </div>
          </div>
          <hr class="nomargin"/>

          <section class="nst-compose-message">
            <div>
              <textarea ui-tinymce="ctlCompose.configs.tinymce" placeholder="Your message goes here..."
                        page-change-element data-ng-model="ctlCompose.model.body" data-ng-change="ctlCompose.model.check()"></textarea>
            </div>
          </section>
        </div>
      </section>
    </div>
  </div>
</div>





