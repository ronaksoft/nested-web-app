<div class="post-card _fw">
  <!-- ng-if="!ctlPostCard.thisPlace" -->
  <section class="post-card-badge" >
    <a class="" data-ng-if="ctlPostCard.post.firstPlace">{{ctlPostCard.post.firstPlace.name}}</a>
    <a ng-if="ctlPostCard.post.allPlacesCount > 1" class="popover-white-nst-msg"
       data-uib-popover-template="'app/messages/partials/popovers/more_places.html'"
       data-popover-placement="auto bottom-right"
       popover-trigger="outsideClick">+{{ctlPostCard.post.otherPlacesCount}}</a>
  </section>
  <section class="post-head _difh">
    <div class="img _df">
      <img initials="ctlPostCard.post.sender.name" data-url="ctlPostCard.post.sender.avatar" data-width="32"
           data-height="32"
           data-radius="16" class="account-initials-32 _df" data-word-count="2" data-font-size="16"/>
    </div>
    <div class="_fw _difc">
      <div class="_difc _fw">
        <div ng-if="ctlPostCard.post.hasAnyAttachment" class="icon icon-post-head icon-attached"></div>
        <div ng-if="ctlPostCard.post.isForwarded" class="icon icon-post-head icon-fwd"></div>
        <div ng-if="ctlPostCard.post.isReplyed" class="icon icon-post-head icon-replied"></div>
        <h4 class="_df">{{ctlPostCard.post.sender.name}}</h4><span class="nst-mood-storm _df">@{{ctlPostCard.post.sender.username}}</span>
      </div>
      <span class="_df _fn post-card-time">{{ctlPostCard.post.date}}</span>
    </div>
  </section>
  <section class="post-subject" nst-post-modal post="ctlPostCard.post"
           dir="{{(ctlPostCard.languageIsRtl(ctlPostCard.post.subject)) ? 'rtl' : 'ltr'}}">
    <h3 ng-if="ctlPostCard.post.subject.length > 0" ng-bind-html="ctlPostCard.post.subject | emoji">
    </h3>
    <h3 ng-if="ctlPostCard.post.subject.length < 1"><i>No Subject</i></h3>
  </section>
  <section class="post-body {{ctlPostCard.post.contentType == 'text/plain' ? 'pre' : ''}}"
           nst-post-modal post="ctlPostCard.post"
           ng-if="ctlPostCard.post.body.length > 0 && ctlPostCard.viewSetting.content"
           dir="{{(ctlPostCard.languageIsRtl(ctlPostCard.post.body)) ? 'rtl' : 'ltr'}}">
    <span ng-bind-html="ctlPostCard.post.body | emoji"></span>
  </section>
  <section class="post-body" ng-if="ctlPostCard.post.body.length < 1 && ctlPostCard.ViewSetting.content"
           nst-post-modal post="ctlPostCard.post">
    <i>Empty post</i>
  </section>
  <!-- <section class="post-attachments" data-ng-if="ctlPostCard.post.hasAnyAttachment && ctlPostCard.viewSetting.attachments">
    <div class="attachments _fw _df" data-ng-include="'app/components/attachments/attachments.html'"
         data-ng-init="thePost = ctlPostCard.post"></div>
  </section> -->
  <section data-ng-if="ctlPostCard.post.hasAnyAttachment && ctlPostCard.viewSetting.attachments">
    <nst-attachments-view post-id="ctlPostCard.post.id" attachments="ctlPostCard.post.attachments" preview-mode="'thumbnail'"></nst-attachments-view>
  </section>
  <section class="post-footer _difh"><a class="_df _fn">{{ctlPostCard.post.commentsCount}} comments</a>
    <div class="post-icons _fw _df">
      <a href="{{ctlPostCard.urls.forward}}" class="icon icon-post icon-fw _df"></a>
      <div class="icon icon-post icon-rp _df popover-white-nst-activity-places"
           data-uib-popover-template="'app/messages/partials/popovers/reply.html'"
           data-popover-placement="auto top-right" popover-trigger="outsideClick"></div>
      <div ng-if="ctlPostCard.post.userHasRemoveAccess" class="icon icon-post icon-delete-menu _df"></div>
    </div>
  </section>
</div>
<section class="post-card-comment" data-ng-if="ctlPostCard.viewSetting.comments">
  <div  class="_df _fw comments-load" ng-if="ctlPostCard.canShowOlderComments() || ctlPostCard.commentBoardNeedsRolling()">
    <a ng-if="ctlPostCard.canShowOlderComments()" href="javascript:void(0);" ng-click="ctlPostCard.showOlderComments()">Older comments...</a>
    <a ng-if="ctlPostCard.commentBoardNeedsRolling()" href="javascript:void(0);" ng-click="ctlPostCard.limitCommentBoard()">Roll up</a>
  </div>
  <comments-board comments="ctlPostCard.post.comments" limit="ctlPostCard.commentBoardLimit"></comments-board>
  <div class="post-card-comment-input _df">
    <input class="_fw" placeholder="write your comment ..." ng-keyup="ctlPostCard.sendComment($event)" ng-disabled="ctlPostCard.isSendingComment"/>
  </div>
</section>
