<div class="maincontainer _fw ng-class:{'navtiny' : navView,'sidetiny' : ctlApp.viewSettings.sidebar.collapsed}">
  <nst-sidebar data-ng-model="sidebar" collapsed="ctlApp.viewSettings.sidebar.collapsed" class="_fn _fh"></nst-sidebar>
  <div class="nst-container">
    <nst-navbar data-ng-model="navbar" place="ctlMessages.currentPlace" page="ctlApp.page"></nst-navbar>

    <div class="nst-content _tr" id="content-wrapper" ng-scrollbars ng-scrollbars-config="ctlMessages.bodyScrollConf"
         onscroll="angular.element(this).scope().ctlMessages.scroll(event);angular.element(this).scope().ctlApp.scroll(event)">
      <section class="content nst-marginbtm-28">
        <div class="filter-bar _fw" ng-mouseleave="popoverSortShow = false;popoverSetShow = false">
          <div ng-mouseenter="popoverSortShow = true" class="iconsblock popover-white-nst-sort"
               uib-popover-template="'app/messages/partials/popovers/sort_popover.html'"
               data-popover-placement="bottom-center" popover-trigger="outsideClick" popover-is-open="popoverSortShow">
            <span class="nst-mood-storm _df">{{ctlMessages.messagesSetting.sort == 'latest-messages' ? 'Latest Messages' : 'Latest Activity'}}</span>
            <div class="icon icon-viewicon-sort _df"></div>
          </div>
          <div ng-mouseenter="popoverSetShow = true" class="iconsblock popover-white-nst-setting"
               uib-popover-template="'app/messages/partials/popovers/setting_popover.html'"
               data-popover-placement="bottom-center" popover-trigger="outsideClick" popover-is-open="popoverSetShow">
            <div class="icon icon-viewicon- "></div>
          </div>
        </div>

        <nst-quick-message data-ng-if="ctlMessages.viewSetting.quickMessage && ctlMessages.currentPlaceId" place-id="ctlMessages.currentPlaceId"></nst-quick-message>

        <div class="post-area">
          <post-card class="_fw" data-ng-repeat="msg in ctlMessages.messages track by $index" post="msg"
                     settings="ctlMessages.viewSetting" postinplace="ctlMessages.currentPlaceId"></post-card>
        </div>

        <div class="text-center nst-margin-24" ng-if="ctlMessages.tryAgainToLoadMore">
          <a href="javascript:void(0);" class="nst-mood-cheerful" data-ng-click="ctlMessages.loadMore()">
            {{ctlMessages.cache.length === 0 ? "Click here to load messages!" : "Load More..."}}
          </a>
        </div>

        <div class="nst-margin-24"
             ng-if="ctlMessages.reachedTheEnd || ctlMessages.noMessages || ctlMessages.loadMessageError">
          <p class="text-center nst-mood-storm" ng-if="!ctlMessages.noMessages && ctlMessages.reachedTheEnd">
            There are no more messages!
          </p>
          <p class="text-center nst-mood-storm" ng-if="ctlMessages.noMessages">
            Be the first who writes something here...
          </p>
          <p class="text-center nst-mood-storm" ng-if="ctlMessages.loadMessageError">
            An error has occurred. Please
            <a href="javascript:void(0);" class="nst-mood-cheerful" data-ng-click="ctlMessages.loadMore(true)">
              try again...
            </a>
          </p>
        </div>
        <div class="_difh nst-mood-cheerful no-gutter nst-margin-24" ng-if="ctlMessages.loading">
          <div class="col-xs-6">
            <div class="nst-loading nst-loading-size-16  _fr"></div>
          </div>
          <div class="col-xs-6 nst-marginbtm-4">Loading...</div>
        </div>
        <div class="nst-marginbtm-32"></div>
      </section>
      <div class="content-plus" id="content-plus">
        <div id="cp1" ng-scrollbars ng-scrollbars-config="ctlMessages.recentScrollConf"
             onwheel="angular.element(this).scope().ctlMessages.preventParentScroll(event)">
          <!-- <div class="name">Recent Activities</div>
          <recent-activity-item ng-repeat="act in ctlMessages.activities" place="ctlMessages.currentPlace"
                                model="act"></recent-activity-item> -->
            <nst-recent-activity place-id="ctlMessages.currentPlaceId" count="10"/>
        </div>

      </div>
    </div>
  </div>
</div>
