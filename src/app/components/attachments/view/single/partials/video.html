<div class="nst-preview-pic-mode" ng-if="attachment.isDownloaded">
  <videogular class="">
    <vg-media ng-src="{{attachment.url}}" vg-native-controls="true" vg-preload="none"></vg-media>
    <vg-buffering></vg-buffering>
  </videogular>
</div>

<div ng-if="!attachment.isDownloaded" class="nst-preview-pic-mode">
  <video ng-if="attachment.viewUrl && attachment.type == 'gif'" style="object-fit: container; width: 100%; height: 100%;" autoplay loop>
    <source src="{{trustSrc(attachment.viewUrl)}}" type="video/mp4">
    Your browser does not support HTML5 video.
  </video>
  <video ng-if="attachment.viewUrl && attachment.type != 'gif'" style="object-fit: container; width: 100%; height: 100%;" controls>
    <source src="{{trustSrc(attachment.viewUrl)}}" type="video/mp4">
    Your browser does not support HTML5 video.
  </video>

  <!--<img ng-if="attachment.hasThumbnail" class="_oph" ng-src="{{attachment.thumbnail}}" />-->
  <!--<div ng-if="!attachment.hasThumbnail" class="att-exp-application-large-">-->
    <!--<div class="_tac _fw _dibp title-att color-doc nst-font-large upper-case">{{attachment.extension}}</div>-->
  <!--</div>-->
  <div class="downloadprogress" ng-if="!attachment.type == 'gif'">
    <div ng-progressbar="{{attachment.downloadedRatio}}" progressbar-mode="circle"></div>
  </div>
</div>
