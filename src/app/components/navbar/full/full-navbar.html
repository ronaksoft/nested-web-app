<nst-mini-navbar></nst-mini-navbar>
<div class="nst-navbar _tr">
  <div class="bg" affixer offset-top="72" parent="navbar" dont-set-width="true"></div>
  <div class="shadow-top" affixer parent="navbar" dont-set-width="true" first-imp="true"></div>
  <div class="nst-content _tr">
    <div class="content _pr">
      <div class="icon-logo" affixer first-imp="true" top="16" parent="content" after-content="0" ng-if="(ctlFullNavbar.pictureUrl || ctlFullNavbar.pictureClass) && ctlFullNavbar.pictureClass">
          <div class="icon reverse {{ctlFullNavbar.pictureClass}}"></div>
      </div>
      <div class="place-logo" affixer first-imp="true" top="16" parent="content" after-content="0" ng-if="(ctlFullNavbar.pictureUrl || ctlFullNavbar.pictureClass) && ctlFullNavbar.pictureUrl">
          <img class="_tr" ng-src="{{ctlFullNavbar.pictureUrl}}"/>
      </div>
      <div class="place-info _difv" >
        <div id="filler" affixer first-imp="true" parent="content" after-content="72"></div>
        <cite affixer first-imp="true" top="16" parent="content" after-content="72">{{ctlFullNavbar.title}}</cite>
        <h3 id="place-address" ng-show="true" affixer top="42" first-imp="true" top="16" parent="content" after-content="72">{{ctlFullNavbar.getPlaceId()}}@nested.me</h3>
        <p class="nst-mood-storm margin-t-5">{{ctlFullNavbar.placeDescription | truncate}}</p>
        <div class="navigation" affixer parent="content" offset-top="72" after-content="72" ng-if="!ctlFullNavbar.controls">
          <nav>
            <a ng-href="{{ctlFullNavbar.getMessagesUrl()}}" ng-click="ctlFullNavbar.rollUpward('message')" class="menu-links-butn _df li-hover {{ctlFullNavbar.page.isMessages ? 'active' : ''}}">
              Messages
            </a>
            <!-- <a ng-href="{{ctlFullNavbar.getFilesUrl()}}" ng-click="ctlFullNavbar.rollUpward('files')" ng-if="!ctlFullNavbar.isBookmarkMode" class="menu-links-butn _df li-hover {{ctlFullNavbar.page.isFiles ? 'active' : ''}}">
              Files
            </a> -->
            <a ng-href="{{ctlFullNavbar.getActivityUrl()}}" ng-click="ctlFullNavbar.rollUpward('activity')" ng-if="!ctlFullNavbar.isBookmarkMode" class="menu-links-butn _df li-hover {{ctlFullNavbar.page.isActivity ? 'active' : ''}}">
              Activity
            </a>
          </nav>
          <div class="search">
            <input type="text" nst-mention class="form-control"
                   placeholder="Search {{ctlFullNavbar.hasPlace() ? ('in ' + ctlFullNavbar.title) : 'Places, users and messages...'}}"
                   type="text" ng-keyup="ctlFullNavbar.search(ctlFullNavbar.searchQuery, $event);"
                   ng-model="ctlFullNavbar.searchQuery"/>
            <i class="icon cursor-pointer icon-search-rotated"></i>
           </div>
         </div>
        <div class="navigation" affixer parent="content" offset-top="72" after-content="72" ng-if="ctlFullNavbar.controls">
          <nav>
            <div class="_df _fw" data-ng-repeat="control in ctlFullNavbar.controls.left" data-ng-switch="control.type">
              <a data-ng-switch-when="button" class="butn-white-nav nst-mood-storm"
                 href="{{control.url}}" data-ng-click="control.fn()">
                 <span class="_dib _vat" ng-if="control.caption">{{control.caption}}</span>
                 <div class="_dib {{control.data.icon}}" ng-if="control.data.icon"></div>
               </a>
              <a data-ng-switch-when="button-back" class="butn-white-nav nst-mood-storm"
                  href="{{ctlFullNavbar.page.state.previous.url}}" data-ng-click="control.fn($event)">
                 <span class="_dib _vat" ng-if="control.caption">{{control.caption}}</span>
                 <div class="_dib {{control.data.icon}}" ng-if="control.data.icon"></div>
               </a>
              <label data-ng-switch-when="button-label" class="butn-white-nav nst-mood-storm"
                     data-ng-click="control.fn()" for="{{control.data.id}}">
                     <span class="_dib _vat" ng-if="control.caption">{{control.caption}}</span>
                     <div class="_dib {{control.data.icon}}" ng-if="control.data.icon"></div>
              </label>
              <a data-ng-switch-when="button-success" class="butn-green-nav"
                 href="{{control.url}}" data-ng-click="control.fn()">
                 <span class="_dib _vat" ng-if="control.caption">{{control.caption}}</span>
                 <div class="_dib {{control.data.icon}}" ng-if="control.data.icon"></div>
               </a>
            </div>

            <div class="_df _fn" data-ng-repeat="control in ctlFullNavbar.controls.right" data-ng-switch="control.type">
              <a data-ng-switch-when="button" class="_fr butn-white-nav nst-mood-storm"
                 href="{{control.url}}" data-ng-click="control.fn()">
                 <span class="_dib _vat" ng-if="control.caption">{{control.caption}}</span>
                 <div class="_dib {{control.data.icon}}" ng-if="control.data.icon"></div>
               </a>
              <a data-ng-switch-when="button-back" class="butn-white-nav nst-mood-storm"
                 href="{{ctlFullNavbar.page.state.previous.url}}" data-ng-click="control.fn()">
                 <span class="_dib _vat" ng-if="control.caption">{{control.caption}}</span>
                 <div class="_dib {{control.data.icon}}" ng-if="control.data.icon"></div>
               </a>
              <label data-ng-switch-when="button-label" class="_fr butn-white-nav nst-mood-storm"
                     data-ng-click="control.fn()" for="{{control.data.id}}">
                     <span class="_dib _vat" ng-if="control.caption">{{control.caption}}</span>
                     <div class="_dib {{control.data.icon}}" ng-if="control.data.icon"></div>
              </label>
              <a data-ng-switch-when="button-success" class="_fr butn-green-nav"
                 href="{{control.url}}" data-ng-click="control.fn()">
                 <span class="_dib _vat" ng-if="control.caption">{{control.caption}}</span>
                 <div class="_dib {{control.data.icon}}" ng-if="control.data.icon"></div>
               </a>
            </div>
          </nav>
         </div>

      </div>
      <div class="nav-access" affixer parent="content" after-content="577" first-imp="true" ng-if="ctlFullNavbar.hasPlace()">
        <div class="cursor-pointer margin-r_5 icon-rp _df popover-white-nst-activity-places"
             popover-append-to-body="false" uib-popover-template="'app/components/navbar/full/navbar-setting-popover.html'"
             popover-popup-close-delay="100" popover-trigger="focus" popover-placement="auto bottom-right"
             data-uib-tooltip="More options" data-tooltip-append-to-body="false"
             data-tooltip-placement="left-top auto">
          <svg  class="svg-hover">
            <use xlink:href="/assets/icons/nst-icn24.svg#Wmore"></use>
            <use xlink:href="/assets/icons/nst-icn24.svg#more"></use>
          </svg>
        </div>
        <div data-uib-tooltip="{{!ctlFullNavbar.isBookmarked ? 'Add to' : 'Remove from'}} favorite places" data-tooltip-append-to-body="false"
             data-tooltip-placement="left-top auto">
          <svg class="svg-hover" ng-click="ctlFullNavbar.toggleBookmark()" ng-class="{morphed : ctlFullNavbar.isBookmarked}">
            <use xlink:href="/assets/icons/nst-icn24.svg#Wfav"></use>
            <use xlink:href="/assets/icons/nst-icn24.svg#fav"></use>
          </svg>
        </div>
        <div data-uib-tooltip="Turn notification {{!ctlFullNavbar.notificationStatus ? 'on' : 'off'}}" data-tooltip-append-to-body="false"
          data-tooltip-placement="left-top auto">
          <svg class="svg-hover" ng-click="ctlFullNavbar.toggleNotification()"  ng-class="{morphed : ctlFullNavbar.notificationStatus}">
            <use xlink:href="/assets/icons/nst-icn24.svg#Wnotifoff" ></use>
            <use xlink:href="/assets/icons/nst-icn24.svg#Wnotifon"></use>
          </svg>
        </div>
      </div>
    </div>
    <div class="content-plus"></div>
  </div>
</div>
<scroll-roller roll-upward="ctlFullNavbar.rollToTop"></scroll-roller>
