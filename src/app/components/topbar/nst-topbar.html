<div class="top-bar">
  <div class="logo">
    <a ui-sref="app.messages-favorites()" class="_df">
      <div data-uib-tooltip-template="'nested-uib-tooltip.html'" class="_df" data-tooltip-placement="bottom auto" data-tooltip-append-to-body="true">
        <div id="Logo-white"></div>
      </div>
      <script type="text/ng-template" id="nested-uib-tooltip.html">
        <span>
          Nested &copy; 2017
          <br>
          v {{ctlSidebar.APP_VERSION}}
        </span>
      </script>
      <div class="_df">
        <div id="Logo-type-white"></div>
      </div>
    </a>
  </div>
  <div class="search">
    <div class="inner">
      <i ng-if="!ctrlTopBar.searchModalOpen">
          <svg class="_24svg fill-white">
            <use xlink:href="/assets/icons/nst-icn24.svg#search"></use>
          </svg>
      </i>
      <i ng-if="ctrlTopBar.searchModalOpen" ng-click="ctrlTopBar.toggleSearchModal()">
          <svg class="_24svg fill-white">
            <use xlink:href="/assets/icons/nst-icn24.svg#xcross"></use>
          </svg>
      </i>
      <input nst-mention mention-new-method mention-enable-label placeholder="{{ctrlTopBar.searchPlaceholder}}" ng-model="ctrlTopBar.chipQuery"
        translate-attrs="placeholder" ng-keyup="ctrlTopBar.searchKeyPressed($event, ctrlTopBar.chipQuery, true)" ng-focus="ctrlTopBar.toggleSearchModal()">
    </div>
  </div>
  <div class="account">
    <a data-uib-tooltip-template="'label-uib-tooltip.html'" data-tooltip-append-to-body="false" data-tooltip-placement="bottom auto"
      ng-click="ctrlTopBar.goLabelRoute($event);" manage-label>
      <svg class="_16svg fill-white">
        <use xlink:href="/assets/icons/nst-icn16.svg#tag"></use>
      </svg>
    </a>
    <a class="notifications-popover-handler" data-uib-popover-template="'app/notification/notification-popover.html'" data-popover-placement="bottom-right auto"
      data-popover-class="notifications-popover" data-popover-is-open="ctrlTopBar.notifOpen" data-popover-append-to-body="false"
      data-popover-trigger="none" ng-click="ctrlTopBar.notifOpen =! ctrlTopBar.notifOpen;ctrlTopBar.profileOpen = false;$event.preventDefault();$event.stopPropagation()">
      <svg class="_20svg fill-white">
        <use xlink:href="/assets/icons/nst-icn20.svg#bell"></use>
      </svg>
      <div class="unread-notif-badge" ng-if="ctrlTopBar.notificationsCount > 0">{{ctrlTopBar.notificationsCount | localize}}</div>
    </a>
    <a class="detailed" data-uib-popover-template="'app/settings/profile/profile-popover.html'" data-popover-placement="bottom-right auto"
      data-popover-class="pop-white profile-popover" data-popover-is-open="ctrlTopBar.profileOpen" data-popover-append-to-body="false"
      data-popover-trigger="none">
      <div class="top-user-avatar-24" user-detail="ctrlTopBar.user.id" user-id="ctrlTopBar.user.id" ng-click="ctrlTopBar.profileOpen =! ctrlTopBar.profileOpen;ctrlTopBar.notifOpen = false;">
        <img initial-avatar="{{ctrlTopBar.user.id}}" name="{{ctrlTopBar.user.fullName}}" picture="{{ctrlTopBar.user | avatar}}" data-width="32"
          data-height="32" data-radius="30" class="account-initials-24 _df" data-word-count="2" data-font-size="12" />
      </div>
    </a>
  </div>
</div>
<div class="search-modal" ng-if="ctrlTopBar.searchModalOpen">
  <div class="search-popover">
    <section class="recent-search">
      <h5>
        <translate>Recent searchs</translate>
      </h5>
      <ul>
        <li>
          <a>Creative brief</a>
          <span>remove</span>
        </li>
      </ul>
    </section>
    <section class="from-suggests">
      <h5>
        <translate>Posts from:</translate>
      </h5>
      <ul>
        <li>
          <div class="profile-user-avatar-32">
            <img initial-avatar="sample" name="sample" picture="{{ctlPostCard.post.sender | avatar : 'x32'}}" data-width="32" data-height="32"
              data-radius="30" class="account-initials-32 _df" data-word-count="2" data-font-size="16" />
          </div>
          <span>sample</span>
        </li>
      </ul>
    </section>
    <section class="label-suggests">
      <h5>
        <translate>Has Label:</translate>
      </h5>
      <ul>
        <li>
          <svg class="_24svg _df _fn color-lbl-A">
            <use xlink:href="/assets/icons/nst-icn24.svg#tag"></use>
          </svg>
          <span>Clients</span>
        </li>
        <li>
          <svg class="_24svg _df _fn color-lbl-A">
            <use xlink:href="/assets/icons/nst-icn24.svg#tag"></use>
          </svg>
          <span>Clients</span>
        </li>
      </ul>
    </section>
  </div>
</div>

<script type="text/ng-template" id="mention-uib-tooltip.html">
  <translate>Notifications</translate>
</script>
<script type="text/ng-template" id="label-uib-tooltip.html">
  <span ng-if="ctrlTopBar.user.authority.labelEditor" translate-inner>Manage Labels</span>
  <span ng-if="!ctrlTopBar.user.authority.labelEditor" translate-inner>My Labels</span>
</script>
