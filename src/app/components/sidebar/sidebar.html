<div class="sidebar _df" ng-class="{ 'expanded' : ctlSidebar.isInDetailMode }" nst-sidebar-revert-mouse-leave="ctlSidebar.isInDetailMode" leave-delay="1000">
  <div class="sidebar-wrapper">
    <div class="side-top">
      <a class="nested-logo detailed" ui-sref="app.messages-favorites()">
        <div>
          <div id="Logo-white"></div>
        </div>
        <div ui-sref="app.messages-favorites()">
          <script type="text/ng-template" id="nested-uib-tooltip.html">
            <translate>
              Nested &copy; 2017
              <br>
              v 3.4.3
            </translate>
          </script>
          <div id="Logo-type-white"
               data-uib-tooltip-template="'nested-uib-tooltip.html'"
               data-tooltip-placement="right auto" data-tooltip-append-to-body="true"
          ></div>
        </div>
      </a>
      <script type="text/ng-template" id="compose-uib-tooltip.html">
        <translate>Compose</translate>
      </script>
      <a class="detailed" id="compoese"
         data-uib-tooltip-template="'compose-uib-tooltip.html'"
         data-tooltip-enable="{{!ctlApp.viewSettings.sidebar.collapsed ? true : false}}"
         data-tooltip-placement="right auto" data-tooltip-append-to-body="true"
         ng-click="ctlSidebar.compose($event);">
        <div>
          <div class="compose">
            <svg>
              <use xlink:href="/assets/icons/nst-icn32.svg#compose"></use>
            </svg>
          </div>
        </div>
        <div>
          <translate>Compose</translate>
        </div>
      </a>
      <div class="side-menu">
        <script type="text/ng-template" id="feed-uib-tooltip.html">
          <translate>Home</translate>
        </script>
        <a ui-sref="app.messages-favorites()" class="side-menu-item detailed"
           data-uib-tooltip-template="'feed-uib-tooltip.html'"
           data-tooltip-enable="{{!ctlApp.viewSettings.sidebar.collapsed ? true : false}}"
           data-tooltip-append-to-body="true" data-tooltip-placement="right auto">
          <span>
            <svg>
              <use xlink:href="/assets/icons/nst-icn24.svg#home"></use>
            </svg>
          </span>
          <translate>Home</translate>
        </a>
        </a>
      </div>
    </div>
    <div class="side-place-wrapper _fw">
      <div class="shadow-top"></div>
      <div class="places _ltr" nst-scrollbar suppress-scroll-x="true">
        <ul class="side-place" data-ng-if="ctlSidebar.invitations.length > 0 " dir="{{_direction}}">
          <li class="side-place-item" ng-repeat="invitaion in ctlSidebar.invitations">
            <a href="javascript:void(0);" ng-click="ctlSidebar.invitation.showModal(invitaion.id)"
               class="side-place-invite-item-inner active detailed" data-uib-tooltip="{{invitaion.place.name}}"
               data-tooltip-enable="{{!ctlApp.viewSettings.sidebar.collapsed  || forceTooltip ? true : false}}" data-tooltip-placement="right auto">
              <div class="side-place-item-image">
                <img class="" ng-src="{{invitaion.place.avatar}}"/>
              </div>
              <div class="_difv">
                <p class="_fw nst-font-small nst-mood-pending-fill" data-ellipsis><translate>You've been invited to</translate></p>
                <span class="invitation-name _txe _fw" data-ng-bind="::invitaion.place.name"></span>
              </div>
            </a>
          </li>
        </ul>
        <ul class="side-place" dir="{{_direction}}">
          <li class="side-place-item" ng-repeat="place in ctlSidebar.places"
              data-ng-include="'app/components/sidebar/place.html'" onload="place = place"></li>

      </ul>
      <script type="text/ng-template" id="create-uib-tooltip.html">
        <translate>Create a new Place</translate>
      </script>
      <a class="create-place _fw detailed" ui-sref="app.place-create"
         ng-click="ctlSidebar.openCreatePlaceModal($event);" dir="{{_direction}}"
         data-uib-tooltip-template="'create-uib-tooltip.html'"
         data-tooltip-enable="{{!ctlApp.viewSettings.sidebar.collapsed ? true : false}}"
         data-tooltip-append-to-body="true" data-tooltip-placement="right auto">
        <span>
          <svg id="addIcon" morph-svg first-id="sq40dashed" second-id="sq40">
            <use xlink:href="/assets/icons/nst-add40.svg#sq40"></use>
            <use xlink:href="/assets/icons/nst-add40.svg#sq40dashed"></use>
          </svg>
        </span>
        <translate>Create a new Place</translate>
      </a>
    </div>
    <div class="shadow-bot"></div>
    </div>
    <div class="side-access">
      <script type="text/ng-template" id="mention-uib-tooltip.html">
        <translate>Notifications</translate>
      </script>
      <a class="detailed popover-mentions"
         data-uib-popover-template="'app/notification/notification-popover.html'"
         data-popover-placement="right-bottom auto"
         data-popover-class="mentions"
         data-popover-append-to-body="false"
         data-popover-is-open="ctlSidebar.mentionOpen"
         data-popover-trigger="none"
         data-tooltip-append-to-body="true"
         data-uib-tooltip-template="'mention-uib-tooltip.html'"
         data-tooltip-enable="{{!ctlApp.viewSettings.sidebar.collapsed ? true : false}}"
         data-tooltip-placement="right auto">
        <div ng-click="ctlSidebar.mentionOpen =! ctlSidebar.mentionOpen;ctlSidebar.profileOpen = false;$event.preventDefault();$event.stopPropagation()">
          <svg>
            <use xlink:href="/assets/icons/nst-icn24.svg#bell"></use>
          </svg>
          <div class="notif" ng-if="ctlSidebar.notificationsCount > 0">{{ctlSidebar.notificationsCount | localize}}</div>
        </div>
        <div ng-click="ctlSidebar.mentionOpen =! ctlSidebar.mentionOpen;ctlSidebar.profileOpen = false;$event.preventDefault();$event.stopPropagation(); _track('sidebar', 'view notifications');">
          <translate>Notifications</translate>
        </div>
      </a>
      <script type="text/ng-template" id="profile-uib-tooltip.html">
        <translate>Edit profile</translate>
      </script>
      <a class="detailed"
         data-uib-popover-template="'app/settings/profile/profile-popover.html'"
         data-popover-placement="right-bottom auto"
         data-popover-class="pop-white pop-profile"
         data-popover-is-open="ctlSidebar.profileOpen"
         data-popover-append-to-body="false"
         data-uib-tooltip-template="'profile-uib-tooltip.html'"
         data-popover-trigger="none"
         data-tooltip-enable="{{!ctlApp.viewSettings.sidebar.collapsed ? true : false}}"
         data-tooltip-placement="right auto" data-tooltip-append-to-body="true">
        <div ng-click="ctlSidebar.profileOpen =! ctlSidebar.profileOpen;ctlSidebar.mentionOpen = false;$event.preventDefault();$event.stopPropagation()">
          <svg>
            <use xlink:href="/assets/icons/nst-icn24.svg#gear"></use>
          </svg>
        </div>
        <translate ng-click="ctlSidebar.profileOpen =! ctlSidebar.profileOpen;ctlSidebar.mentionOpen = false;$event.preventDefault();$event.stopPropagation()">Profile</translate>
      </a>
      <script type="text/ng-template" id="logout-uib-tooltip.html">
        <translate>Log out</translate>
      </script>
    </div>
  </div>
  <!--<div class="sidebar-border"></div>-->
  <div class="sidebar-plus-wrapper" ng-show="ctlSidebar.selectedGrandPlace">
    <div class="side-profile-block" bg-check="{{ctlSidebar.selectedGrandPlace.avatar}}">
      <div class="user-detail txt">
        <a>{{ctlSidebar.selectedGrandPlace.name}}</a>
      </div>
      <div class="user-avatar">
        <img ng-if="ctlSidebar.selectedGrandPlace.avatar" ng-src="{{ctlSidebar.selectedGrandPlace.avatar}}"/>
        <img ng-if="!ctlSidebar.selectedGrandPlace.avatar" class="account-initials-32"
             initials="ctlSidebar.selectedGrandPlace.name" data-url="ctlSidebar.selectedGrandPlace.avatar"
             data-width="size" data-height="size" data-radius="20" data-word-count="2" data-font-size="16"/>
      </div>
      <!--<div class="side-stats">-->
        <!--<div class="unread ng-class:{'active' : ctlSidebar.isUnreadMode}">-->
          <!--<a class="_fn _df" ui-sref="app.place-messages-unread({placeId: ctlSidebar.selectedGrandPlace.id})"><translate>Total unseen posts</translate>&nbsp;</a>-->
          <!--<span class="_fn _df">{{(ctlSidebar.placesNotifCountObject[ctlSidebar.selectedGrandPlace.id] || 0) | localize}}</span>-->
        <!--</div>-->
      <!--</div>-->
    </div>
    <div nst-scrollbar suppress-scroll-x="true" class="places">
      <div class="places-list">
        <nst-sidebar-place-info grand-place="ctlSidebar.selectedGrandPlace" unread-mode="ctlSidebar.isUnreadMode"></nst-sidebar-place-info>
      </div>
    </div>
  </div>
</div>
