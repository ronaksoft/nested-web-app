<nst-navbar data-ng-model="navbar"
            place-id="{{ctlFiles.currentPlace.id}}"
            show-place-id="ctlFiles.showPlaceId"
            nav-title="{{ctlFiles.currentPlace.id?ctlFiles.currentPlace.name: ctlFiles.navTitle}}"
            nav-picture-url="{{ctlFiles.currentPlace.id ? ctlFiles.currentPlace.picture.getUrl('x128') : '' }}"
            nav-picture-class="{{ !ctlFiles.currentPlace.id? ctlFiles.navIconClass : '' }}"
            ready-to-show="ctlFiles.currentPlaceLoaded"
            ready-to-anime="true"
            place-description="{{ctlFiles.currentPlace.description}}"></nst-navbar>
<div class="navbar-illu"></div>
<div class="nst-content _tr content-wrapper" ng-init="showFilters = true;">
<scroll-change-handler reached-bottom="ctlFiles.loadMore"></scroll-change-handler>
  <section class="content _bgwhite">
    <div class="navbarillu"></div>
    <div class="_difh _fw">
      <div class="_df _fn">
        <div class="files-nav" popover-append-to-body="false" uib-popover-template="'app/files/files-sort-popover.html'"
                 popover-trigger="click" popover-placement="auto bottom" data-popover-class="files-popover"
                 data-uib-tooltip="Files Filter" data-tooltip-append-to-body="false"
                 data-tooltip-placement="top-center" popover-enable="showFilters" ng-click="showFilters = true;">
          <p ng-show="ctlFiles.selectedFiles.length  == 0" class="capitalize">{{::ctlFiles.selectedFileType.label}}</p>
            <!--//TODO:Add size filter// -->
            <p ng-show="ctlFiles.selectedFiles.length  > 0">
              {{ctlFiles.selectedFiles.length }}<span>&nbsp;<translate>Files</translate></span>
              <span class="total-files-size">{{ctlFiles.totalSelectedFileSize | bytes}}</span>
            </p>
              <span ng-show="ctlFiles.selectedFiles.length  == 0" class="files-input-group">
            <label class="icon files-arrow" role="button-left" class="cursor-pointer margin-r_5 icon-rp _df"></label></span>
        </div>
      </div>
      <div class="_df _fw"></div>
    </div>

    <div class="file-list">
      <div class="file-list-header">
        <div class="files-srch _df {{ctlFiles.keyword.length > 0 ? 'srch' : ''}}" ng-if="ctlFiles.selectedFiles.length  == 0">
          <svg class="_16svg" ng-click="ctlFiles.searchFunc()">
            <use xlink:href="/assets/icons/nst-icn16.svg#search"></use>
            <use xlink:href="/assets/icons/nst-icn16.svg#xcross"></use>
          </svg>
          <!--<input type="text" placeholder="File name" ng-model="ctlFiles.keyword" ng-change="ctlFiles.search(ctlFiles.keyword);" translate-attrs="placeholder" focus-me="{{ctlFiles.searchTrigg}}"/>-->
        </div>
        <div class="header-name" ng-show="ctlFiles.selectedFiles.length == 0">
          <input type="text" placeholder="File name" ng-model="ctlFiles.keyword" ng-change="ctlFiles.search(ctlFiles.keyword);" translate-attrs="placeholder" focus-me="{{ctlFiles.searchTrigg}}"/>
        </div>
        <div class="header-name" ng-show="ctlFiles.selectedFiles.length > 0"></div>
        <!-- <div ng-show="ctlFiles.selectedFiles.length > 0" id="header-download"><span
          class="_dib"></span><span>Download</span></div> -->
        <div ng-show="ctlFiles.selectedFiles.length > 0" id="header-send-to">
          <span class="_dib">
            <svg>
              <use xlink:href="/assets/icons/nst-icn20.svg#forward"></use>
            </svg>
          </span>
          <span class="send" ng-click="ctlFiles.compose();"><translate>Send to</translate></span>
        </div>
        <div class="header-size" ng-show="ctlFiles.selectedFiles.length == 0"><translate>Size</translate></div>
        <div class="header-date" ng-show="ctlFiles.selectedFiles.length == 0"><translate>Received Date</translate></div>
      </div>
      <ul class="files-types" nst-selectable ng-if="ctlFiles.files.length > 0" on-select="ctlFiles.onSelect" select-attr="fid"
          selector="li.file-list-container">
        <li class="file-list-container _df" fid="{{::item.id}}" data-ng-repeat="item in ctlFiles.files">
          <div class="files-types-images">
            <a href ng-click="ctlFiles.preview(item);">
              <div class="img-container" ng-if="item.thumbnail">
              <img ng-if="item.thumbnail" ng-src="{{item.thumbnail}}" alt="{{::item.filename}}" class="file-thumbnail"/>
              </div>
              <div ng-if="!item.thumbnail" class="file-badge {{'file-badge-' + item.type }}">
                {{::item.extension}}
              </div>
            </a>
          </div>
          <div class="file-list-item">
            <div class="item-name">
              <a href ng-click="ctlFiles.preview(item);">
                {{::item.filename}}
              </a>
            </div>
            <div class="item-size">{{item.size | bytes}} </div>
            <div class="item-date"><span data-uib-tooltip="{{item.date | date : 'full' | localize}}" data-tooltip-append-to-body="true" data-tooltip-placement="top auto">{{item.uploadTime | passed | localize }}</span></div>
          </div>
        </li>
      </ul>
    </div>
    <div class="text-center margin-top-10 nst-mood-storm" ng-if="ctlFiles.files.length == 0 && !ctlFiles.filesLoadProgress">
      <translate>There are no files here yet...</translate>
    </div>
    <div ng-click="ctlFiles.loadMore()" class="text-center margin-top-10 nst-mood-storm" ng-if="ctlFiles.files.length > 0 && !ctlFiles.filesLoadProgress && ctlFiles.hasNextPage">
      <translate>Load more ...</translate>
    </div>
    <div class="_difh nst-mood-cheerful no-gutter nst-margin-24" ng-if="ctlFiles.filesLoadProgress">
      <div class="col-xs-6">
        <div class="nst-loading nst-loading-size-16  _fr"></div>
      </div>
      <div class="col-xs-6 nst-marginbtm-4"><translate>Loading...</translate></div>
    </div>
    <div class="nst-margin-24" ng-if="ctlFiles.hasNextPage || loadFilesError">
      <p class="text-center nst-mood-storm" ng-if="!ctlFiles.hasNextPage && !ctlFiles.filesLoadProgress">
        <translate>No more files here!</translate>
      </p>
      <p class="text-center nst-mood-storm" ng-if="ctlFiles.loadFilesError && !ctlFiles.filesLoadProgress" translate-inner>An error has occurred. Please <a href="javascript:void(0);" class="nst-mood-cheerful" data-ng-click="ctlFiles.loadMore()">Try again!</a></p>
    </div>
    <div class="nst-marginbtm-32"></div>
  </section>
  <div class="content-plus illu">
    <div id="members" nst-scrollbar suppress-scroll-x="true"
         ng-if="!ctlFiles.isSubPersonal() && ctlFiles.hasSeeMembersAccess">
      <nst-place-teammates-sidebar grand-place="ctlFiles.currentPlaceId" place-id="ctlFiles.currentPlaceId"></nst-place-teammates-sidebar>
    </div>
    <div id="cp1" nst-scrollbar suppress-scroll-x="true"
         affixer parent=".content-plus" after-content="0" top="134" fixed-top="true">
      <!--FIXME:: use only one of place/place-id -->
      <nst-recent-activity place="ctlFiles.currentPlaceId" place-id="ctlFiles.currentPlaceId"  count="16"/>
    </div>
  </div>
</div>
