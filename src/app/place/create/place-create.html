<div class="close-modal" ng-click="$dismiss()" id="close-create-place">
  <svg>
    <use xlink:href="/assets/icons/nst-icn32.svg#cross"></use>
  </svg>
</div>
<div id="create-place"
     ng-init="ctlCreate.step1 = !ctlCreate.isCreateGrandPlaceMode; ctlCreate.step2 = ctlCreate.step1">
  <div class="_difv" ng-if="ctlCreate.step2">

    <form ng-submit="ctlCreate.save(placeForm.$valid);" name="placeForm" novalidate>
      <h2 class="_df"><translate>Create a Place</translate></h2>
      <div class="select-box disabled _difh" ng-if="ctlCreate.isClosedPlace">
        <div class="icn">
          <svg>
            <use xlink:href="/assets/icons/nst-icn20.svg#closedplace"></use>
          </svg>
        </div>
        <div class="desc">
          <h3><translate>Closed Place</translate></h3>
          <p ng-if="!ctlCreate.isPersonalPlace"><translate>Only Members can view the contents of this Place</translate></p>
          <p ng-if="ctlCreate.isPersonalPlace"><translate>Only you can view the contents of this Place.</translate></p>
        </div>
      </div>
      <div class="select-box disabled _difh" ng-if="ctlCreate.isOpenPlace">
        <div class="icn">
          <svg>
            <use xlink:href="/assets/icons/nst-icn20.svg#openplace"></use>
          </svg>
        </div>
        <div class="desc">
          <h3><translate>Open Place</translate></h3>
          <p><translate>All<b>&nbsp;{{ ctlCreate.grandPlace.name }}</b>Members can view Place contents.</translate></p>
        </div>
      </div>
      <div class="form-group" ng-class="{ 'has-error' : placeForm.placeName.$invalid && ctlCreate.submitted}">
        <label class="input-lab" ng-if="placeForm.placeName.$valid || !ctlCreate.submitted"><translate>Place name</translate></label>
        <label class="error-message" ng-if="placeForm.placeName.$error.required && ctlCreate.submitted"><translate>Place name is required<translate></label>
        <input name="placeName" class="form-control" type="text" ng-model="ctlCreate.place.name"
               ng-change="ctlCreate.setId(ctlCreate.place.name);" placeholder="Marketing Development" required/>
      </div>

      <label class="input-lab" for="PlaceID"><translate>Place ID</translate></label>
      <div class="placeID">
        <div class="field">
          <div id="PlaceID" tabindex="2" ng-click="ctlCreate.changeId(ctlCreate.place.id)">
            <span ng-if="ctlCreate.hasParentPlace">{{ctlCreate.place.parentId}}.</span>
            {{ctlCreate.place.id.length > 0 ? ctlCreate.place.id : 'marketing-development'}}
            <span>@nested.me</span>
            <div ng-if="ctlCreate.placeIdChecking" class="nst-loading nst-loading-size-16 _dib"></div>
          </div>
        </div>
        <aside><translate>The Place will be identified by this unique address. You <b>can't</b> change the Place ID after creating the Place, so choose wisely!</translate></aside>
      </div>
      <p class="input-lab" ng-if="ctlCreate.isClosedPlace"><translate>Who can post messages to this Place?</translate></p>
      <!--off-->
      <div class="select-box2" ng-if="ctlCreate.isClosedPlace" ng-click="ctlCreate.setReceivingOff();"
           ng-class="{ selected : ctlCreate.receivingMode == 'off'}">

        <h3 ng-if="ctlCreate.isClosedPlace">
          <svg class="tick">
            <use xlink:href="/assets/icons/nst-icn16.svg#tick"></use>
          </svg><translate>Only {{ ctlCreate.place.privacy.addPost === 'creators'  ?  "Managers" : "Members" }} of "{{ctlCreate.place.name ? ctlCreate.place.name : '...'}}"</translate>
        </h3>
        <h3 ng-if="!ctlCreate.isClosedPlace">
          <svg class="tick">
            <use xlink:href="/assets/icons/nst-icn16.svg#tick"></use>
          </svg><translate>Only Members of "{{ctlCreate.place.name ? ctlCreate.place.name : '...'}}"</translate>
        </h3>

        <p ng-if="!ctlCreate.isClosedPlace"><translate>Only "<b>{{ctlCreate.place.name ? ctlCreate.place.name : '...'}}</b>" Members can view Place contents.</translate></p>
        <p ng-if="ctlCreate.isClosedPlace"><translate>Only {{ ctlCreate.place.privacy.addPost === 'creators'  ?  "Managers" : "Members" }} can post message to "<b>{{ctlCreate.place.name ? ctlCreate.place.name : '...'}}</b>" place.</translate></p>
        <aside>
          <p class="f4"><translate>Which Members can contribute to this Place?</translate></p>
          <div class="_df f1">
            <select ng-model="ctlCreate.place.privacy.addPost">
              <option value="creators"><translate>Managers of {{ctlCreate.place.name ? ctlCreate.place.name : '...'}}</translate></option>
              <option value="everyone"><translate>Members of {{ctlCreate.place.name ? ctlCreate.place.name : '...'}}</translate></option>
            </select>
          </div>
        </aside>
      </div>

      <!--internal-->
      <div class="select-box2" ng-if="ctlCreate.isClosedPlace && ctlCreate.grandPlace.name" ng-click="ctlCreate.setReceivingMembers();"
           ng-class="{ selected : ctlCreate.receivingMode == 'members'}">
        <h3 ng-if="!ctlCreate.isClosedPlace">
          <svg class="tick">
            <use xlink:href="/assets/icons/nst-icn16.svg#tick"></use>
          </svg><translate>"{{ ctlCreate.grandPlace.name }}" Members</translate>
        </h3>
        <h3 ng-if="ctlCreate.isClosedPlace">
          <svg class="tick">
            <use xlink:href="/assets/icons/nst-icn16.svg#tick"></use>
          </svg><translate>"{{ ctlCreate.grandPlace.name }} Members</translate>
        </h3>
        <p ng-if="!ctlCreate.isClosedPlace"><translate>All <b>{{ ctlCreate.grandPlace.name }}</b> Members can post messages to this Place.</translate></p>
        <p ng-if="ctlCreate.isClosedPlace"><translate>Only "{{ ctlCreate.grandPlace.name }}" Members can post messages to "<b>{{ ctlCreate.place.name }}</b>" Place.</translate></p>
        <aside>
          <p><translate>Show in the search results?</translate></p>
          <div class="place-switch">
            <input type="checkbox" name="checkbox_id" id="pub-res" value="value">
            <label for="pub-res"><b><translate>On</translate></b>
              <div class="circle" switch-drag></div>
            </label>
            <label for="pub-res"><b><translate>Off</translate></b></label>
          </div>
        </aside>
      </div>

      <!--external-->
      <div class="select-box2" ng-if="ctlCreate.isClosedPlace" ng-click="ctlCreate.setReceivingEveryone();"
           ng-class="{ selected : ctlCreate.receivingMode == 'everyone'}">
        <h3>
          <svg class="tick">
            <use xlink:href="/assets/icons/nst-icn16.svg#tick"></use>
          </svg><translate>Everyone <i>(including email)</i></translate>
        </h3>
        <p><translate>Everyone can send their messages to "<b>{{ctlCreate.place.name ? ctlCreate.place.name  : '...'}}</b>" Place.
          This includes messages sent from email platforms to your Nested address ({{ ctlCreate.place.id }}@nested.me).</translate>
        </p>
        <aside>
          <p><translate>Show in the search results?</translate></p>
          <div class="place-switch">
            <input type="checkbox" name="checkbox_id" id="res" value="value">
            <label for="res"><b>On</b>
              <div class="circle" switch-drag></div>
            </label>
            <label for="res"><b>Off</b></label>
          </div>
        </aside>
      </div>

      <div ng-if="!ctlCreate.isPersonalPlace">
        <p class="input-lab"><translate>Privacy</translate></p>
        <div class="option-row">
          <p class="f4 _fw _df option-des">
            <translate>Who can add Members to this Place?</translate>
          </p>
          <div class="_df f1">
            <select ng-model="ctlCreate.place.policy.addMember">
              <option value="creators" id="manager-add-access"><translate>Managers of {{ctlCreate.place.name ? ctlCreate.place.name : '...'}}</translate></option>
              <option value="everyone" id="member-add-access"><translate>Members of {{ctlCreate.place.name ? ctlCreate.place.name : '...'}}</translate></option>
            </select>
          </div>
        </div>
        <div class="option-row" ng-if="ctlCreate.isClosedPlace">
          <p class="f4 _fw _df option-des">
            <translate>Who can create a sub-Place?</translate>
          </p>
          <div class="_df f1">
            <select ng-model="ctlCreate.place.policy.addPlace">
              <option value="creators" id="manager-create-sub-place-access"><translate>Managers of {{ctlCreate.place.name ? ctlCreate.place.name : '...'}}</translate></option>
              <option value="everyone" id="member-create-sub-place-access"><translate>Members of {{ctlCreate.place.name ? ctlCreate.place.name : '...'}}</translate></option>
            </select>
          </div>
        </div>
        <div class="_difv nst-marginbtm-8"
             ng-if="(ctlCreate.hasGrandParent || ctlCreate.hasParentPlace) && !ctlCreate.parentLoadProgress">
          <p class="create-label">
            <translate>Select a group of Members you would wish to be added to this Place</translate>
          </p>
          <ul class="list-unstyled">
            <li>
              <input class="green-radio " type="radio" id="fill-members-none" name="fillMembers" value="none"
                     ng-model="ctlCreate.place.fillMembers">
              <label for="fill-members-none"><translate>None</translate></label>
            </li>
            <li ng-if="ctlCreate.hasParentPlace && ctlCreate.parentPlace.getTeammatesCount() > 1">
              <input class="green-radio " type="radio" id="fill-members-parent" name="fillMembers" value="parent"
                     ng-model="ctlCreate.place.fillMembers">
              <label for="fill-members-parent"><translate>All <b>{{::ctlCreate.parentPlace.name}}</b> Members ({{::ctlCreate.parentPlace.getTeammatesCount()}})</translate></label>
            </li>
            <li ng-if="ctlCreate.hasGrandParent">
              <input class="green-radio " type="radio" id="fill-members-grand" name="fillMembers" value="grand"
                     ng-model="ctlCreate.place.fillMembers">
              <label for="fill-members-grand"><translate>All <b>{{ctlCreate.grandPlace.name}}</b> Members ({{::ctlCreate.grandPlace.getTeammatesCount()}})</translate></label>
            </li>
          </ul>


        </div>
      </div>
      <div class="option-row">
        <input class="create-place-checkbox" type="checkbox" id="favo" ng-model="ctlCreate.place.favorite">
        <label for="favo"><translate>Add to my Favorites</translate></label>
      </div>
      <div class="option-row">
        <input class="create-place-checkbox" type="checkbox" id="notification" ng-model="ctlCreate.place.notification">
        <label for="notification"><translate>Turn Notifications on for this Place.</translate></label>
      </div>
      <button class="submit" type="submit" id="submit-place"><translate>Create a Place</translate></button>
    </form>
  </div>
</div>
