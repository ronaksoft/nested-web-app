
<div id="create-place"
     ng-init="ctlCreate.step1 = !ctlCreate.isCreateGrandPlaceMode">
  <div class="_difv" ng-if="ctlCreate.step == 1">
    <form ng-submit="ctlCreate.save(placeForm.$valid);" name="placeForm" novalidate>
      <h2 class="_df">
        <svg class="_32svg _r45" ng-click="$dismiss()">
          <use xlink:href="/assets/icons/nst-icn32.svg#cross"></use>
        </svg><translate>Create a Place Step 1/2</translate>
      </h2>
      <div class="_fw _jcc _df">
        <label for="logo" class="pic">
          <img src="/assets/icons/absents_place.svg"/>
        </label>
        <input id="logo" type="file" name="logo" accept="image/*" onchange="angular.element(this).scope().ctlCreate.loadImage(event)"/>
      </div>
      <div class="form-group" ng-class="{ 'has-error' : placeForm.placeName.$invalid && ctlCreate.submitted}">
        <label class="input-lab" ng-if="placeForm.placeName.$valid || !ctlCreate.submitted"><translate>Place name</translate></label>
        <label class="error-message" ng-if="placeForm.placeName.$error.required && ctlCreate.submitted"><translate>Place name is required</translate></label>
        <input name="placeName" class="form-control" type="text" ng-model="ctlCreate.place.name"
               ng-change="ctlCreate.setId(ctlCreate.place.name);" placeholder="Marketing Development" required/>
      </div>

      <label class="input-lab" for="PlaceID"><translate>Place ID</translate></label>
      <div class="placeID ng-class:{'not-val' : !ctlCreate.placeIdIsFullAvailable}">
        <div class="field">
          <div id="PlaceID" tabindex="2" ng-click="ctlCreate.changeId(ctlCreate.place.id)">
            <span ng-if="ctlCreate.hasParentPlace">{{ctlCreate.place.parentId}}.</span>
            {{ctlCreate.place.id.length > 0 ? ctlCreate.place.id : 'marketing-development'}}
            <span>@nested.me</span>
            <div ng-if="ctlCreate.placeIdChecking" class="nst-loading nst-loading-size-16 _dib"></div>
          </div>
        </div>
        <aside><translate>The Place will be identified by this unique address. You <b>can't</b> change the Place ID after creating the Place, so choose wisely!</translate></aside>
      </div>
      <p class="input-lab" ng-if="ctlCreate.isClosedPlace"><translate>Who can post messages to this Place?</translate></p>

      <label class="input-lab input-form" for="PlaceDes"><translate>Place ID</translate></label>
      <div class="placeID ng-class:{'not-val' : !ctlCreate.placeIdIsFullAvailable}">
        <div class="field">
          <input id="PlaceDes" type="text" placeholder="Place description">
        </div>
      </div>

      <div ng-if="!ctlCreate.isPersonalPlace">
        <p class="input-lab"><translate>Privacy</translate></p>
        <div class="option-row">
          <p class="f4 _fw _df option-des" translate-inner ng-if="ctlCreate.hasParentPlace">Who can add Members to this Place?</p>
          <p class="f4 _fw _df option-des" translate-inner ng-if="!ctlCreate.hasParentPlace">Who can invite Members to this Place?</p>
          <div class="_df f1">
            <select ng-model="ctlCreate.place.policy.addMember">
              <option value="creators" id="manager-add-access" translate-inner>Managers of {{ctlCreate.place.name ? ctlCreate.place.name : '...'}}</option>
              <option value="everyone" id="member-add-access" translate-inner>Members of {{ctlCreate.place.name ? ctlCreate.place.name : '...'}}</option>
            </select>
          </div>
        </div>
        <div class="option-row" ng-if="ctlCreate.isClosedPlace">
          <p class="f4 _fw _df option-des">
            <translate>Who can create a sub-Place?</translate>
          </p>
          <div class="_df f1">
            <select ng-model="ctlCreate.place.policy.addPlace">
              <option value="creators" id="manager-create-sub-place-access" translate-inner>Managers of {{ctlCreate.place.name ? ctlCreate.place.name : '...'}}</option>
              <option value="everyone" id="member-create-sub-place-access" translate-inner>Members of {{ctlCreate.place.name ? ctlCreate.place.name : '...'}}</option>
            </select>
          </div>
        </div>
        <div class="_difv nst-marginbtm-8"
             ng-if="(ctlCreate.hasGrandParent || ctlCreate.hasParentPlace) && !ctlCreate.parentLoadProgress">
          <p class="create-label">
            <translate>Select a group of Members you would wish to be added to this Place</translate>
          </p>
          <ul class="list-unstyled">
            <li>
              <input class="green-radio " type="radio" id="fill-members-none" name="fillMembers" value="none"
                     ng-model="ctlCreate.place.fillMembers">
              <label for="fill-members-none"><translate>No-one</translate></label>
            </li>
            <li ng-if="ctlCreate.hasParentPlace && ctlCreate.parentPlace.getTeammatesCount() > 1">
              <input class="green-radio " type="radio" id="fill-members-parent" name="fillMembers" value="parent"
                     ng-model="ctlCreate.place.fillMembers">
              <label for="fill-members-parent"><translate>All <b>{{ctlCreate.parentPlace.name}}</b> Members ({{ctlCreate.parentPlace.getTeammatesCount() | localize}})</translate></label>
            </li>
            <li ng-if="ctlCreate.hasGrandParent">
              <input class="green-radio " type="radio" id="fill-members-grand" name="fillMembers" value="grand"
                     ng-model="ctlCreate.place.fillMembers">
              <label for="fill-members-grand"><translate>All <b>{{ctlCreate.grandPlace.name}}</b> Members ({{ctlCreate.grandPlace.getTeammatesCount() | localize}})</translate></label>
            </li>
          </ul>


        </div>
      </div>
      <button class="submit" type="button" ng-click="ctlCreate.step = 2"><translate>Next</translate></button>
      <!--<button class="submit" type="submit" id="submit-place"><translate>Create a Place</translate></button>-->
    </form>
  </div>
</div>
