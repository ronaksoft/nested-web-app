<div class="close-modal" ng-click="$dismiss()">
  <svg>
    <use xlink:href="/assets/icons/nst-icn32.svg#cross"></use>
  </svg>
</div>
<div id="place-settings">
  <div class="place-name">
    <label for="logo" class="pic">
      <img data-ng-if="ctlSettings.logoFile || ctlSettings.place.picture.thumbnails.x64.url.download"
           ng-src="{{ctlSettings.logoUrl || ctlSettings.place.picture.thumbnails.x64.url.download}}"/>
      <img data-ng-if="!ctlSettings.place.picture.thumbnails.x64.url.download && !ctlSettings.logoFile"
           src="/assets/icons/absents_place.svg"/>
    </label>
    <input id="logo" data-ng-disabled="!ctlSettings.accesses.hasControlAccess" type="file" name="logo" accept="image/*"
           onchange="angular.element(this).scope().ctlSettings.loadImage(event)"/>

    <div class="det">
      <h3 data-ng-if="ctlSettings.accesses.hasControlAccess" data-tooltip-placement="left auto" data-uib-tooltip="Place Name" data-tooltip-append-to-body="true"
          editable-text="ctlSettings.place.name" onbeforesave="ctlSettings.updateName($data);">
        {{ctlSettings.place.name || 'empty'}}<a class="change-button">change</a></h3>
      <h3 data-ng-if="!ctlSettings.accesses.hasControlAccess" data-tooltip-placement="left auto" data-uib-tooltip="Place Name" data-tooltip-append-to-body="true">
        {{ctlSettings.place.name || 'empty'}}</h3>

      <h5 class="nst-mood-storm" >{{ctlSettings.place.id
        + '@nested.me'}}</h5>
    </div>
  </div>
  <div class="place-des">
    <p data-ng-if="ctlSettings.accesses.hasControlAccess" class="nst-mood-storm" data-tooltip-placement="left auto" data-tooltip-append-to-body="true"
       data-uib-tooltip="Place description" editable-text="ctlSettings.place.description"
       onbeforesave="ctlSettings.updateDescription($data);">{{ctlSettings.place.description || 'empty'}}</p>
    <p class="no-animation" data-tooltip-placement="left auto" data-uib-tooltip="Place description"
       data-ng-if="!ctlSettings.accesses.hasControlAccess">{{ctlSettings.place.description || 'empty'}}</p>

  </div>
  <p ng-if="ctlSettings.isClosedPlace">Receiving</p>
  <div ng-if="ctlSettings.isClosedPlace" class="recive-set" ng-class="{'preview' : !ctlSettings.changeReceptiveMode}">
    <div class="select-box-step2"
         ng-if="ctlSettings.accesses.hasControlAccess || ctlSettings.place.privacy.receptive == 'off'"
         ng-click="ctlSettings.setReceivingOff();"
         ng-class="{ selected : ctlSettings.place.privacy.receptive === 'off', disabled : !ctlSettings.accesses.hasControlAccess }">
      <h3>Off</h3>
      <div class="_difh _fw _aic">
        <p>Just Keyholders can communicate in the place.</span></p>
      </div>
      <p></p>
      <aside>
        <p>Which kind of Keyholders can be contribute in the place?</p>
        <select data-ng-change="ctlSettings.updateAddPostPolicy()" ng-model="ctlSettings.place.policy.add_post" ng-if="ctlSettings.accesses.hasControlAccess">
          <option value="creators">{{::ctlSettings.memberOptions['creators']}}</option>
          <option value="everyone">{{::ctlSettings.memberOptions['everyone']}}</option>
        </select>
        <p ng-if="!ctlSettings.accesses.hasControlAccess">
          {{::ctlSettings.memberOptions[ctlSettings.place.policy.add_post]}}
        </p>
      </aside>
    </div>
    <div class="select-box-step2"
         ng-if="ctlSettings.accesses.hasControlAccess || ctlSettings.place.privacy.receptive == 'internal'"
         ng-click="ctlSettings.setReceivingMembers();"
         ng-class="{ selected : ctlSettings.place.privacy.receptive == 'internal', disabled : !ctlSettings.accesses.hasControlAccess}">
      <h3>Members Only</h3>
      <p>All Members can send messages to the place.</p>
      <aside>
        <p>Show in the Members search results?</p>
        <div class="place-switch">
          <input type="checkbox" name="checkbox_id" id="receiving-members-search" value="value" ng-disabled="!ctlSettings.accesses.hasControlAccess"
                 data-ng-model="ctlSettings.place.privacy.search"
                 ng-change="ctlSettings.updateSearchPrivacy()">
          <label for="receiving-members-search">
            <b>ON</b>
            <div class="circle"></div>
          </label>
          <label for="receiving-members-search">
            <b>OFF</b>
          </label>
        </div>
      </aside>
    </div>
    <div class="select-box-step2"
         ng-if="ctlSettings.accesses.hasControlAccess || ctlSettings.place.privacy.receptive == 'external'"
         ng-click="ctlSettings.setReceivingEveryone();"
         ng-class="{ selected : ctlSettings.place.privacy.receptive == 'external', disabled : !ctlSettings.accesses.hasControlAccess}">
      <h3>Everyone <i>(also email)</i></h3>
      <p>Everyone can send their messages to the place.</p>
      <aside>
        <p>Show in the public search results?</p>
        <div class="place-switch">
          <input type="checkbox" name="checkbox_id" id="receiving-everyone-search" ng-disabled="!ctlSettings.accesses.hasControlAccess"
                 data-ng-model="ctlSettings.place.privacy.search"
                 ng-change="ctlSettings.updateSearchPrivacy()">
          <label for="receiving-everyone-search">
            <b>ON</b>
            <div class="circle"></div>
          </label>
          <label for="receiving-everyone-search">
            <b>OFF</b>
          </label>
        </div>
      </aside>
    </div>
  </div>
  <div class="_difh _fw">
    <div class="_fw _difv" ng-if="ctlSettings.isClosedPlace">
      <p>Who Can Create Subplace?</p>
      <select ng-if="ctlSettings.accesses.hasControlAccess"
              data-ng-disabled="ctlSettings.place.privacy.receptive === 'off' "
              data-ng-model="ctlSettings.place.policy.add_place"
              data-ng-change="ctlSettings.updateAddPlacePolicy()">
              <option value="creators">{{::ctlSettings.memberOptions['creators']}}</option>
              <option value="everyone">{{::ctlSettings.memberOptions['everyone']}}</option>
      </select>
      <p ng-if="!ctlSettings.accesses.hasControlAccess">
        {{::ctlSettings.memberOptions[ctlSettings.place.policy.add_place]}}
      </p>
    </div>
    <div class="_fw _difv">
      <p>Who Can Add Keyholder?</p>
      <select ng-if="ctlSettings.accesses.hasControlAccess"
              data-ng-model="ctlSettings.place.policy.add_member"
              data-ng-change="ctlSettings.updateAddMemberPolicy()">
        <option value="creators">{{::ctlSettings.memberOptions['creators']}}</option>
        <option value="everyone">{{::ctlSettings.memberOptions['everyone']}}</option>
      </select>
      <p ng-if="!ctlSettings.accesses.hasControlAccess">
        {{::ctlSettings.memberOptions[ctlSettings.place.policy.add_member]}}
      </p>
    </div>
  </div>
  <p data-ng-if="ctlSettings.accesses.hasSeeMembersAccess">Keyholders</p>
  <div class="select-box2 _difh"
       data-ng-if="ctlSettings.accesses.hasSeeMembersAccess"
       data-ng-click="ctlSettings.addMember()">
    <div class="add">
      <svg>
        <use xlink:href="/assets/icons/nst-icn20.svg#cross"></use>
      </svg>
    </div>
    <p>Add Keyholders</p>
  </div>
  <nst-place-member-item data-ng-if="ctlSettings.accesses.hasSeeMembersAccess" class="user-item"
                         data-ng-repeat="member in ctlSettings.teammates"
                         member="member" place="ctlSettings.place"
                         has-remove-access="ctlSettings.accesses.hasRemoveAccess"
                         has-control-access="ctlSettings.accesses.hasControlAccess" on-remove="ctlSettings.removeMember"
                         role="member.state"/>
  <div class="_fw _tac margin-b-15">
    <a class="load-more nst-mood-cheerful" href ng-if="ctlSettings.hasMoreTeammates && !ctlSettings.teammatesLoadProgress" ng-click="ctlSettings.loadMoreTeammates();">Load more</a>
    <span class="nst-mood-cheerful" ng-if="ctlSettings.teammatesLoadProgress">Loading...</span>
  </div>
</div>
