<div id="PostView" class="_difv _fw _fh">
  <div class="_difv _fw" id="PostHeader">
    <div class="post-nav-top _difh _fw">
      <p class="_df _fw" data-ng-bind-html="postVm.post.subject | emoji"></p>
      <div class="time nst-mood-storm _fn">{{postVm.post.date}}</div>
      <div class="closebut" ng-click="$close(result)">
        <img src="../assets/icons/close.svg" />
      </div>
    </div>
    <div class="post-nav-bot _difh">
      <img initials="postVm.post.sender.name" data-url="postVm.post.sender.avatar" data-width="24" data-height="24"
           data-radius="12" class="account-initials-24 _df" data-word-count="2" data-font-size="11"/>
      <span class="actor-name nst-mood-cheerful _df">{{postVm.post.sender.name}}</span>
      <span class="margin-l-5 nst-mood-storm">to</span>
      <div class="badges _df _fw">
        <div class="large-badge" data-ng-repeat="place in postVm.post.allPlaces">
          <a class="_di _fl" href="/#/places/{{place.id}}/messages">
            {{place.name}}
          </a>
        </div>
      </div>
      <div class="panel-action">
        <ul class="list-inline _df">
          <li ng-if="postVm.post.haveAnyPlaceWithDeleteAccess()">
            <a href="" ng-click="deletePost(postVm.post);">
              <span class="nst-mood-solid _dib">Delete</span>
              <span class="action-button-post-delete _dib"></span>
            </a>
          </li>

          <li>
            <a href="{{postVm.urls.forward}}">
              <span class="nst-mood-solid _dib">Forward</span>
              <span class="action-button-post-forward  _dib"></span>
            </a>
          </li>

          <li>
            <div class="popover-white-nst-activity-places cursor-pointer" uib-popover-template="'app/post/reply.html'"
                 ng-init="postVm = postVm" data-popover-placement="bottom-right auto" popover-trigger="outsideClick">
              <span class="nst-mood-solid _dib">Reply</span>
              <span class="action-button-post- _dib"></span>
            </div>
          </li>

        </ul>
      </div>
    </div>
  </div>
  <div class="_difh _fh" id="PostBody">
    <div id="Content" class="_df _fw">
      <div class="_difv _fh _fw">
        <div class="_df _fw">
          <div class="attachments _fw _df" data-ng-include="'app/components/attachments/attachments.html'"
               data-ng-init="thePost = postVm.post"></div>
        </div>

        <div class="_df _fh">
          <div class="_fh _fw">
            <div class="msg-post-view {{postVm.post.contentType == 'text/plain' ? 'pre' : ''}}"
              data-ng-bind-html="postVm.post.body | emoji">
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="Comments" class="_difv _vat">
      <div class="_difv comment-msg" onscroll="angular.element(this).scope().postVm.checkScroll(event)"
           scroll-me="scrolling">
        <div data-ng-if="postVm.hasMoreComments" class="_fw text-center">
          <a id="load-more-events" class="nst-mood-cheerful" data-ng-click="postVm.loadMoreComments()">Load More...</a>
        </div>
        <div data-ng-repeat="comment in postVm.post.comments | orderBy : 'date.getTime()'" class="_difh NewComment">
          <div class="_df profile-post-view">
            <img initials="comment.sender.name" data-url="comment.sender.avatar" data-width="24" data-height="24"
                 data-radius="12" class="account-initials-24" data-word-count="2" data-font-size="11"/>
          </div>
          <div class="_difv _fw">
            <div class="_difh">
              <h5 class="nst-mood-cheerful _df _fw" data-ng-bind="comment.sender.name"></h5>
              <div class="_df time-post-view nst-mood-storm" data-ng-bind="comment.date | date:'dd MMM yyyy'"
                   data-uib-tooltip="{{comment.date | date:'yyyy d MMM H:mm'}}"
                   data-tooltip-append-to-body="true" data-tooltip-placement="auto left"></div>
            </div>
            <div class="_df _fw cmt-post-view">
              <emoji>
                <mark marked="comment.body">
                </mark>
              </emoji>
              &nbsp;&nbsp;
              <a href="javascript:void(0);" data-ng-if="postVm.allowToRemoveComment(comment)"
                 class="nst-mood-storm nst-font-small"
                 ng-click="postVm.removeComment(comment);">delete</a>
            </div>
          </div>
        </div>
      </div>
      <div class="comment-input _difh">
        <div class="_df">
          <img initials="postVm.user.name" data-url="postVm.user.avatar" data-width="32" data-height="32"
               data-radius="16" class="account-initials-32" data-word-count="2" data-font-size="16"/>
        </div>
        <div class="_difv _fw">
          <textarea class="_df _fw" cols="32" maxlength="250"
                    data-ng-disabled="postVm.commentSendInProgress"
                    data-ng-model="postVm.nextComment"
                    ng-keyup="postVm.sendComment($event)"
                    placeholder="write your comment..."/>
          </textarea>
          <div class="_difh sendcomment">
            <span data-ng-show="250 - nextComment.length < 20"
                  class="nst-mood-simple _df">{{250 - nextComment.length}}</span>
            <button class="butn-send-comment df" data-ng-click="postVm.sendComment($event)">Send</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
