<div id="PostView" class="_difv _fw _fh">
  <div class="_difv _fw" id="PostHeader">
    <div class="_difh _fw">
      <div class="post-nav-left _df _fw">
        <p class="_fw" data-ng-bind-html="postVm.post.subject | emoji"></p>
      </div>
      <div class="post-nav-right _difh nst-font-small">
        <div class="date nst-mood-storm" data-ng-bind="postVm.post.date.getTime() | date:'d MMMM'"></div>
        <span class="nst-mood-storm">,</span>
        <div class="time nst-mood-storm" data-ng-bind="postVm.post.date.getTime() | date:'yyyy'"></div>
        &nbsp;
       <strong class="time nst-mood-storm n" data-ng-bind="postVm.post.date.getTime() | date:'H:mm'"></strong>


        <div class="closebut" ng-click="$close(result)"><img src="../assets/icons/close.svg"></div>
      </div>
    </div>
    <div class="_difh">
      <div class="post-nav-left-bottom _difh _fw">
        <img initials="postVm.post.sender.fullname" data-url="postVm.post.sender.picture.x32.url" data-width="24" data-height="24" data-radius="12" class="account-initials-24" data-word-count="2" data-font-size="11"/>
        <span class="actor-name nst-mood-cheerful _df" data-ng-bind="postVm.post.sender.fullname"></span>
        <span class="margin-l-5 nst-mood-storm">to</span>
        <div class="badges _df _fw">
          <div class="large-badge" data-ng-repeat="place in postVm.post.places"><a class="_di _fl" href="#/events/{{place.id}}" data-ng-bind="place.name"></a></div>
        </div>
      </div>

      <div class="post-nav-right-bottom _difh">
        <div class="panel-action _fw">
          <ul class="list-inline _df">
            <li ng-if="postVm.post.haveAnyPlaceWithDeleteAccess()">
              <a href="" ng-click="deletePost(postVm.post);">
                <span class="nst-mood-solid _dib">Delete</span>
                <span class="action-button-post-delete _dib"></span>
              </a>
            </li>

            <li>
              <a href="#/new/fw:{{postVm.post.id}}">
                <span class="nst-mood-solid _dib">Forward</span>
                <span class="action-button-post-forward  _dib"></span>
              </a>
            </li>

            <li>
              <div class="popover-green cursor-pointer" uib-popover-template="'app/post/reply.html'" data-popover-placement="bottom-right auto" popover-trigger="outsideClick">
                <span class="nst-mood-solid _dib">Reply</span>
                <span class="action-button-post- _dib"></span>
              </div>
            </li>

          </ul>
        </div>
      </div>
    </div>
  </div>
  <div class="_difh _fh" id="PostBody">
    <div id="Content" class="_df _fw">
      <div class="_difv _fh _fw">
        <div class="_df _fw">
          <div class="attachments _fw _df" data-ng-include="'app/components/attachments/attachments.html'" data-ng-init="thePost = postVm.post"></div>
        </div>

        <div class="_df _fh">
          <div id="PostBody" class="_fh _fw">
            <div class="msg-post-view {{postVm.post.contentType == 'text/plain' ? 'pre' : ''}}" data-ng-bind-html="postVm.post.body | emoji"></div>
          </div>
        </div>
      </div>
    </div>

    <div id="Comments" class="_difv _vat">
      <div class="_difv comment-msg" onscroll="angular.element(this).scope().postVm.checkScroll(event)" scroll-me="scrolling">
        <div data-ng-if="postVm.hasMoreComments" class="_fw text-center">
          <a id="load-more-events" class="nst-mood-cheerful" data-ng-click="postVm.loadMoreComments()">Load More...</a>
        </div>
        <div data-ng-repeat="comment in postVm.post.comments | orderBy : 'date.getTime()'" class="_difh NewComment">
          <div class="_df profile-post-view">
            <img initials="comment.sender_fname" data-url="comment.sender.picture.x32.url" data-width="24" data-height="24" data-radius="12" class="account-initials-24" data-word-count="2" data-font-size="11"/>
          </div>
          <div class="_difv _fw">
            <div class="_difh">
              <h5 class="nst-mood-cheerful _df _fw" data-ng-bind="comment.sender.fullName"></h5>
              <div class="_df time-post-view nst-mood-storm" data-ng-bind="comment.date.getTime() | date:'dd MMM yyyy'"
                   data-uib-tooltip="{{comment.date.getTime() | date:'yyyy d MMM H:mm'}}" data-tooltip-append-to-body="true" data-tooltip-placement="auto left"></div>
            </div>
            <div class="_df _fw cmt-post-view">
              <emoji>
                <span marked="comment.body">
                </span>
              </emoji>
              &nbsp;&nbsp;
              <a href="javascript:void(0);" data-ng-if="postVm.allowToRemoveComment(comment)" class="nst-mood-storm nst-font-small"
                 ng-click="postVm.removeComment(comment);">delete</a>
            </div>
          </div>
        </div>
      </div>
      <div class="comment-input _difh">
        <div class="_df">
          <img initials="postVm.user.fullname" data-url="postVm.user.picture.x32.url" data-width="32" data-height="32" data-radius="16" class="account-initials-32" data-word-count="2" data-font-size="16"/>
        </div>
        <div class="_difv _fw">
          <textarea class="_df _fw" cols="32" maxlength="250" ng-keyup="postVm.sendComment($event)" placeholder="write your comment..." data-ng-model="nextComment"/></textarea>
          <div class="_difh sendcomment">
            <span data-ng-show="250 - nextComment.length < 20" class="nst-mood-simple _df">{{250 - nextComment.length}}</span>
            <button class="butn-send-comment df" data-ng-click="postVm.sendComment($event)">Send</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
